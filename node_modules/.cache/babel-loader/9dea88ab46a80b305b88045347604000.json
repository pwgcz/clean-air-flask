{"ast":null,"code":"import _slicedToArray from\"/home/pawel/PycharmProjects/clear-air/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import axios from'axios';import{Bar,BarChart,Tooltip,CartesianGrid,XAxis,YAxis}from'recharts';export var MeasuringData=function MeasuringData(_ref){var stand=_ref.stand;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),quality=_useState4[0],setQuality=_useState4[1];var arrData=[];var arrQuality=[];var tempArrData=Array(5).fill(1);useEffect(function(){axios.get(\"/measuring-data/\".concat(stand.id)).then(function(res){setData(res.data.reverse());}).catch(handleErrors);axios.get(\"/quality-indicators/\".concat(stand.index_id)).then(function(res){setQuality(res.data);}).catch(handleErrors);},[stand.id,stand.index_id]);//erro handler\nvar handleErrors=function handleErrors(err){if(err.response){console.log('response error');}else if(err.request){console.log('request error');}else{console.log('unexpectec error');}};// object factory vreating object of quality indef limit value\nvar dataFacroty=function dataFacroty(arr){return{very_good:arr[0],good:arr[1],moderate:arr[2],sufficient:arr[3],bad:arr[4],very_bad:arr[5]};};// slice data value of each parameter in arrray depending on quality index value\nif(quality!==''){arrQuality=[0,quality.very_good,quality.good,quality.moderate,quality.sufficient,quality.bad];arrData=data.map(function(dataItem){return dataFacroty(tempArrData.map(function(item,i){if(dataItem.value>=arrQuality[i+1]){return arrQuality[i+1]-arrQuality[i];}else if(dataItem.value>=arrQuality[i]&&dataItem.value<=arrQuality[i+1]){return dataItem.value-arrQuality[i];}else{return 0;}}));});}var barData=data.map(function(item,i){return Object.assign(item,arrData[i]);});var formatXAxis=function formatXAxis(tickItem){return'';};var CustomTooltip=function CustomTooltip(_ref2){var active=_ref2.active,payload=_ref2.payload,label=_ref2.label;if(active){return/*#__PURE__*/React.createElement(\"div\",{className:\"custom-tooltip\"},/*#__PURE__*/React.createElement(\"p\",null,\"Value: \",payload[0].payload.value.toPrecision(3)),/*#__PURE__*/React.createElement(\"p\",null,\"Time: \",payload[0].payload.date.slice(11,16)),/*#__PURE__*/React.createElement(\"p\",null,\"Date: \",payload[0].payload.date.slice(0,10)));};return null;};return/*#__PURE__*/React.createElement(BarChart,{width:700,height:300,data:barData,className:\"chart-wrapper\",margin:{top:5,right:5,left:5,bottom:5}},/*#__PURE__*/React.createElement(CartesianGrid,{stroke:\"#ccc\",strokeDasharray:\"1 1\"}),/*#__PURE__*/React.createElement(XAxis,{height:50,dataKey:\"date\",tickFormatter:formatXAxis}),/*#__PURE__*/React.createElement(YAxis,{width:100,dataKey:\"value\",label:{value:stand.code+'[ug/m3]',angle:-90}}),/*#__PURE__*/React.createElement(Tooltip,{content:/*#__PURE__*/React.createElement(CustomTooltip,null)}),/*#__PURE__*/React.createElement(Bar,{stackId:\"pollution\",dataKey:\"very_good\",fill:\"#33FF57\"}),/*#__PURE__*/React.createElement(Bar,{stackId:\"pollution\",dataKey:\"good\",fill:\"#DBFF33\"}),/*#__PURE__*/React.createElement(Bar,{stackId:\"pollution\",dataKey:\"moderate\",fill:\"#FFBD33\"}),/*#__PURE__*/React.createElement(Bar,{stackId:\"pollution\",dataKey:\"sufficient\",fill:\"#FF5733\"}),/*#__PURE__*/React.createElement(Bar,{stackId:\"pollution\",dataKey:\"bad\",fill:\"#900C3F \"}),/*#__PURE__*/React.createElement(Bar,{stackId:\"pollution\",dataKey:\"very_bad\",fill:\"##581845  \"}));};","map":{"version":3,"sources":["/home/pawel/PycharmProjects/clear-air/src/components/MeasuringData.js"],"names":["React","useEffect","useState","axios","Bar","BarChart","Tooltip","CartesianGrid","XAxis","YAxis","MeasuringData","stand","data","setData","quality","setQuality","arrData","arrQuality","tempArrData","Array","fill","get","id","then","res","reverse","catch","handleErrors","index_id","err","response","console","log","request","dataFacroty","arr","very_good","good","moderate","sufficient","bad","very_bad","map","dataItem","item","i","value","barData","Object","assign","formatXAxis","tickItem","CustomTooltip","active","payload","label","toPrecision","date","slice","top","right","left","bottom","code","angle"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport {Bar, BarChart, Tooltip, CartesianGrid, XAxis, YAxis} from 'recharts';\n\nexport const MeasuringData = ({stand}) =>{\n\nconst [data, setData] = useState([])\nconst [quality, setQuality] = useState('')\nlet arrData = [];\nlet arrQuality = []\nlet tempArrData = Array(5).fill(1)\n\nuseEffect(() => {\n\n  axios.get(`/measuring-data/${stand.id}`)\n  .then((res) => {\n    setData(res.data.reverse());\n  }).catch(handleErrors)\n\n  axios.get(`/quality-indicators/${stand.index_id}`)\n  .then((res) => {\n    setQuality(res.data);\n  }).catch(handleErrors)\n}, [stand.id, stand.index_id]);\n\n//erro handler\n\nconst handleErrors = (err) =>{\n  if (err.response){\n    console.log('response error')\n  }else if(err.request){\n    console.log('request error')\n  } else {\n    console.log('unexpectec error')\n  }\n};\n\n// object factory vreating object of quality indef limit value\n  const dataFacroty = (arr) =>{\n    return {\n      very_good: arr[0],\n      good: arr[1],\n      moderate: arr[2],\n      sufficient: arr[3],\n      bad: arr[4],\n      very_bad: arr[5]\n    }\n  }\n\n// slice data value of each parameter in arrray depending on quality index value\n  if(quality !== ''){\n     arrQuality = [0, quality.very_good, quality.good, quality.moderate, quality.sufficient, quality.bad];\n    arrData = data.map((dataItem) => {\n       return(\n         dataFacroty(tempArrData.map((item, i) => {\n            if(dataItem.value >= arrQuality[i+1]){\n              return(arrQuality[i+1] - arrQuality[i])\n            } else if(dataItem.value  >= arrQuality[i] && dataItem.value  <= arrQuality[i+1]){\n              return(dataItem.value - arrQuality[i])\n            } else {\n              return 0;\n            }\n         })\n       )\n       )\n     });\n  }\n\n  const barData = (data.map((item, i) =>{\n    return(Object.assign(item, arrData[i]))\n  })\n)\n\n  const formatXAxis = (tickItem) => {\n    return '';\n  }\n\n  const CustomTooltip = ({ active, payload, label })=>{\n    if(active){\n      return(\n      <div className='custom-tooltip'>\n      <p>Value: {payload[0].payload.value.toPrecision(3)}</p>\n      <p>Time: {payload[0].payload.date.slice(11, 16)}</p>\n      <p>Date: {payload[0].payload.date.slice(0, 10)}</p>\n\n      </div>\n    )\n  };\n  return null;\n  }\n\n  return(\n\n  <BarChart width={700} height={300} data={barData} className='chart-wrapper' margin={{\n          top: 5, right: 5, left: 5, bottom: 5,\n  }}>\n  <CartesianGrid stroke=\"#ccc\" strokeDasharray=\"1 1\" />\n  <XAxis height={50} dataKey=\"date\"   tickFormatter={formatXAxis}/>\n  <YAxis width={100} dataKey=\"value\" label={{ value: stand.code + '[ug/m3]', angle: -90 }} />\n\n    <Tooltip content={<CustomTooltip />} />\n\n    <Bar stackId='pollution' dataKey=\"very_good\" fill='#33FF57' />\n    <Bar stackId='pollution' dataKey=\"good\" fill=\"#DBFF33\" />\n    <Bar stackId='pollution' dataKey=\"moderate\"  fill=\"#FFBD33\" />\n    <Bar stackId='pollution' dataKey=\"sufficient\"  fill=\"#FF5733\" />\n    <Bar stackId='pollution' dataKey=\"bad\" fill=\"#900C3F \" />\n    <Bar stackId='pollution' dataKey=\"very_bad\" fill=\"##581845  \" />\n  </BarChart>\n\n\n  )\n}\n"]},"metadata":{},"sourceType":"module"}
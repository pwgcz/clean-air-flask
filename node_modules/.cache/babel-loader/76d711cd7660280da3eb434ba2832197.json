{"ast":null,"code":"var _jsxFileName = \"/home/pawel/PycharmProjects/clear-air/src/components/MeasuringData.js\";\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Line, ReferenceArea, LabelList, Bar, BarChart, AreaChart, Area, Tooltip, CartesianGrid, XAxis, YAxis, ReferenceLine } from 'recharts';\nexport const MeasuringData = ({\n  stand\n}) => {\n  const [data, setData] = useState([]);\n  const [quality, setQuality] = useState('');\n  let arrData = [];\n  let arrQuality = [];\n  let tempArrData = Array(5).fill(1);\n  useEffect(() => {\n    axios.get(`/measuring-data/${stand.id}`).then(res => {\n      setData(res.data.slice(14, 39));\n    });\n    axios.get(`/quality-index/${stand.index_id}`).then(res => {\n      setQuality(res.data);\n    });\n  }, [stand.id, stand.index_id]);\n\n  if (quality !== '') {\n    arrQuality = [0, quality.very_good, quality.good, quality.moderate, quality.sufficient, quality.bad];\n    arrData = data.map(dataItem => {\n      return tempArrData.map((item, i) => {\n        if (dataItem.value >= arrQuality[i + 1]) {\n          return arrQuality[i + 1] - arrQuality[i];\n        } else if (dataItem.value >= arrQuality[i] && dataItem.value <= arrQuality[i + 1]) {\n          return dataItem.value - arrQuality[i];\n        } else {\n          return 0;\n        }\n      });\n    });\n  }\n\n  const formatXAxis = tickItem => {\n    return tickItem.split('T', 2)[1];\n  };\n\n  console.log({\n    quality,\n    arrData,\n    arrQuality\n  });\n  data.value = arrData;\n  return /*#__PURE__*/React.createElement(BarChart, {\n    width: 750,\n    height: 300,\n    data: data,\n    className: \"chart-wrapper\",\n    margin: {\n      top: 5,\n      right: 30,\n      left: 20,\n      bottom: 5\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 3\n    }\n  }), console.log(data.value), /*#__PURE__*/React.createElement(Bar, {\n    stackId: \"pollution\",\n    dataKey: \"value[0]\",\n    fill: \"#8884d8\",\n    dataMax: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Bar, {\n    stackId: \"pollution\",\n    dataKey: \"value\",\n    fill: \"red\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Bar, {\n    stackId: \"pollution\",\n    dataKey: \"value\",\n    fill: \"red\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Bar, {\n    stackId: \"pollution\",\n    dataKey: \"value\",\n    fill: \"red\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Bar, {\n    stackId: \"pollution\",\n    dataKey: \"value\",\n    fill: \"red\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }), series.map(s => /*#__PURE__*/React.createElement(Line, {\n    dataKey: \"value\",\n    data: s.data,\n    name: s.name,\n    key: s.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(CartesianGrid, {\n    stroke: \"#ccc\",\n    strokeDasharray: \"1 1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(XAxis, {\n    height: 100,\n    dataKey: \"date\",\n    interval: 0,\n    angle: 30,\n    label: \"Time[h]\",\n    tickFormatter: formatXAxis,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(YAxis, {\n    dataKey: \"value\",\n    label: {\n      value: stand.code + '[ug/m3]',\n      angle: -90\n    },\n    width: 110,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }, quality.name));\n};","map":{"version":3,"sources":["/home/pawel/PycharmProjects/clear-air/src/components/MeasuringData.js"],"names":["React","useEffect","useState","axios","Line","ReferenceArea","LabelList","Bar","BarChart","AreaChart","Area","Tooltip","CartesianGrid","XAxis","YAxis","ReferenceLine","MeasuringData","stand","data","setData","quality","setQuality","arrData","arrQuality","tempArrData","Array","fill","get","id","then","res","slice","index_id","very_good","good","moderate","sufficient","bad","map","dataItem","item","i","value","formatXAxis","tickItem","split","console","log","top","right","left","bottom","series","s","name","code","angle"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport {Line,ReferenceArea, LabelList,  Bar, BarChart, AreaChart, Area, Tooltip, CartesianGrid, XAxis, YAxis, ReferenceLine } from 'recharts';\n\nexport const MeasuringData = ({stand}) =>{\n\nconst [data, setData] = useState([])\nconst [quality, setQuality] = useState('')\nlet arrData = [];\nlet arrQuality = []\nlet tempArrData = Array(5).fill(1)\n\nuseEffect(() => {\n\n  axios.get(`/measuring-data/${stand.id}`)\n  .then((res) => {\n    setData(res.data.slice(14, 39));\n  })\n\n  axios.get(`/quality-index/${stand.index_id}`)\n  .then((res) => {\n    setQuality(res.data);\n  })\n}, [stand.id, stand.index_id]);\n\n  if(quality !== ''){\n     arrQuality = [0, quality.very_good, quality.good, quality.moderate, quality.sufficient, quality.bad];\n    arrData = data.map((dataItem) => {\n       return(\n         tempArrData.map((item, i) => {\n            if(dataItem.value >= arrQuality[i+1]){\n              return(arrQuality[i+1] - arrQuality[i])\n            } else if(dataItem.value  >= arrQuality[i] && dataItem.value  <= arrQuality[i+1]){\n              return(dataItem.value - arrQuality[i])\n            } else {\n              return 0;\n            }\n         })\n       )\n     });\n  }\n\n  const formatXAxis = (tickItem) => {\n    return tickItem.split('T', 2)[1];\n  }\n\n\n  console.log({quality, arrData, arrQuality});\n\n  data.value = arrData\n\n  return(\n\n    <BarChart width={750} height={300} data={data} className='chart-wrapper' margin={{\n          top: 5, right: 30, left: 20, bottom: 5,\n        }}>\n\n  <Tooltip />\n  {console.log(data.value)}\n      <Bar stackId='pollution' dataKey=\"value[0]\"  fill=\"#8884d8\" dataMax={3}  />\n      <Bar stackId='pollution' dataKey=\"value\"  fill=\"red\" />\n      <Bar stackId='pollution' dataKey=\"value\"  fill=\"red\" />\n      <Bar stackId='pollution' dataKey=\"value\"  fill=\"red\" />\n      <Bar stackId='pollution' dataKey=\"value\"  fill=\"red\" />\n\n      {series.map(s => (\n                <Line dataKey=\"value\" data={s.data} name={s.name} key={s.name} />\n              ))}\n\n      <CartesianGrid stroke=\"#ccc\" strokeDasharray=\"1 1\" />\n      <XAxis height={100} dataKey=\"date\" interval={0} angle={30} label=\"Time[h]\" tickFormatter={formatXAxis}/>\n      <YAxis dataKey=\"value\" label={{ value: stand.code + '[ug/m3]', angle: -90 }} width={110}/>\n\n      <div>{quality.name}</div>\n  </BarChart>\n\n\n  )\n}\n"]},"metadata":{},"sourceType":"module"}